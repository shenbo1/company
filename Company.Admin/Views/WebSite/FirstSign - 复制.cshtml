
@{
    ViewBag.Title = "项目立项";
    Layout = "~/Layout/_LayoutWebSite.cshtml";
    Page.Title = "项目立项";
    Page.Key = "软件开发，技术支持，智能硬件，智能名宿";
    Page.Desc = "微信开发，小程序开发，智能展厅，智能酒店，智能民宿，智能家居，智能办公, 技术孵化，技术合伙人，硬件开发，智能硬件";

    Page.AccountName = ViewBag.AccountName;
}
<style>
    .form-group {
        height: 35px;
    }
</style>
<div class="main-container container">
    <ul class="breadcrumb">
        <li><a href="#"><i class="fa fa-home"></i></a></li>
        <li><a href="#">项目添加</a></li>
    </ul>
    <div class="row">
        <div class="producttab ">
            <div class="tabsslider  vertical-tabs col-xs-12">
                <ul class="nav nav-tabs col-lg-2 col-sm-3">
                    <li class="active"><a data-toggle="tab" id="changetb1" href="#tab-1">项目基本信息</a></li>
                    <li class="item_nonactive"><a data-toggle="tab" id="changetb2" href="#tab-review">账户信息</a></li>
                    <li class="item_nonactive"><a data-toggle="tab" id="changetb3" href="#tab-4">公司资料</a></li>
                    @*<li class="item_nonactive"><a data-toggle="tab" href="#tab-5">账户信息</a></li>*@
                </ul>
                <div class="tab-content col-lg-10 col-sm-9 col-xs-12">
                    <div id="tab-1" class="tab-pane fade active in">
                        <h2 id="review-title">项目基本信息</h2>
                        <div class="contacts-form">
                            <div class="form-group required">
                                <label class="col-sm-2 control-label" for="input-firstname">项目名称</label>
                                <div class="col-sm-10">
                                    <input type="text" name="firstname" value="" placeholder="项目名称" id="projectname" class="form-control">
                                </div>
                            </div>
                            <div class="form-group required">
                                <label class="col-sm-2 control-label" for="input-firstname">预计开始时间</label>
                                <div class="col-sm-10">
                                    <input type="text" name="firstname" value="" onfocus="WdatePicker({minDate:'%y-%M-%d'})" placeholder="预计开始时间" id="starttime" class="form-control">
                                </div>
                            </div>
                            <div class="form-group required">
                                <label class="col-sm-2 control-label" for="input-firstname">预计结束时间</label>
                                <div class="col-sm-10">
                                    <input type="text" name="firstname" value="" onfocus="WdatePicker({minDate:'%y-%M-%d'})" placeholder="预计结束时间" id="endtime" class="form-control">
                                </div>
                            </div>
                            <div class="form-group required">
                                <label class="col-sm-2 control-label" for="input-firstname">项目简介</label>
                                <div class="col-sm-10">
                                    <textarea placeholder="项目简介" id="info" class="form-control"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="tab-review" class="tab-pane fade">
                        <h2 id="review-title">账户信息</h2>
                        <div class="contacts-form">
                            <div class="form-group required">
                                <label class="col-sm-2 control-label" for="input-firstname">姓名</label>
                                <div class="col-sm-10">
                                    <input type="text" name="firstname" value="" placeholder="姓名" id="input-firstname" class="form-control">
                                </div>
                            </div>
                            <div class="form-group required">
                                <label class="col-sm-2 control-label" for="input-telephone">手机号</label>
                                <div class="col-sm-10">
                                    <input type="tel" name="telephone" value="" placeholder="手机号" id="input-telephone" class="form-control">
                                </div>
                            </div>
                            <div class="form-group required">
                                <label class="col-sm-2 control-label" for="input-email">邮箱</label>
                                <div class="col-sm-10">
                                    <input type="email" name="email" value="" placeholder="邮箱" id="input-email" class="form-control">
                                </div>
                            </div>
                            <div class="form-group required">
                                <label class="col-sm-2 control-label" for="input-password">密码</label>
                                <div class="col-sm-10">
                                    <input type="password" name="password" value="" placeholder="密码" id="input-password" class="form-control">
                                </div>
                            </div>
                            <div class="form-group required">
                                <label class="col-sm-2 control-label" for="input-confirm">确认密码</label>
                                <div class="col-sm-10">
                                    <input type="password" name="confirm" value="" placeholder="确认密码" id="input-confirm" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="tab-4" class="tab-pane fade">
                        <div class="form-group required">
                            <label class="col-sm-2 control-label" for="input-company">公司名</label>
                            <div class="col-sm-10">
                                <input type="text" name="company" value="" placeholder="公司名" id="input-company" class="form-control">
                            </div>
                        </div>
                        <div class="form-group required">
                            <label class="col-sm-2 control-label" for="input-company">公司状态</label>
                            <div class="col-sm-10">
                                <select name="country_id" id="input-city" class="form-control">
                                    <option value="1">已注册</option>
                                    <option value="2">筹备中</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group required">
                            <label class="col-sm-2 control-label" for="input-address-1">公司地址</label>
                            <div class="col-sm-10">
                                <input type="text" name="address_1" value="" placeholder="公司地址" id="input-address" class="form-control">
                            </div>
                        </div>
                        <div class="form-group required">
                            <label class="col-sm-2 control-label" for="input-city">城市</label>
                            <div class="col-sm-10">
                                <select name="country_id" id="input-city" class="form-control">
                                    <option value="上海">上海</option>
                                    <option value="北京">北京</option>
                                    <option value="深圳">深圳</option>
                                    <option value="香港">香港</option>
                                    <option value="其他">其他</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group required">
                            <label class="col-sm-2 control-label" for="input-info">公司简介</label>
                            <div class="col-sm-10">
                                <textarea placeholder="公司简介" id="input-info" class="form-control"></textarea>
                            </div>
                        </div>
                    </div>
                    <div id="tab-5" class="tab-pane fade">

                    </div>
                </div>
                @*<div class="button-group">
                        <button class="addToCart" type="button" data-toggle="tooltip" title="" onclick="cart.add('42', '1');" data-original-title="Add to Cart"><i class="fa fa-shopping-cart"></i> <span class="hidden-xs">Add to Cart</span></button>
                        <button class="wishlist" type="button" data-toggle="tooltip" title="" onclick="wishlist.add('42');" data-original-title="Add to Wish List"><i class="fa fa-heart"></i></button>
                        <button class="compare" type="button" data-toggle="tooltip" title="" onclick="compare.add('42');" data-original-title="Compare this Product"><i class="fa fa-exchange"></i></button>
                    </div>*@
            </div>
            <div class="buttons clearfix" style="text-align:right;"><a id="btn" onclick="register()" class="btn buttonGray">完成并立项</a></div>

        </div>
    </div>
</div>
<script type="text/javascript" src="/Template/HAdmin/lib/My97DatePicker/4.8/WdatePicker.js"></script>

<script>
    function GetJobs() {
        ajaxGet.post({}, "/website/GetJobList", function (data) {
            console.log(data);
        }, function (data) { })
    }
    setTimeout(function () { Main.GetJobs(); }, 1000);


    function register() {
        if ($('#btn').text() != '完成并立项') { return; }

        var Data = {};
        var ProjectName = $("#projectname").val();//姓名
        if (ProjectName == "") { layer.msg("请输入项目名称", { icon: 2 }); $("#changetb1").click(); return; }
        Data.ProjectName = ProjectName;
        var StratTime = $("#starttime").val();//姓名
        if (StratTime == "") { layer.msg("请选择项目开始时间", { icon: 2 }); $("#changetb1").click(); return; }
        Data.StartTime = StratTime;
        var EndTime = $("#endtime").val();//姓名
        if (EndTime == "") { layer.msg("请输入项目结束时间", { icon: 2 }); $("#changetb1").click(); return; }
        Data.EndTime = EndTime;
        var Info = $("#info").val();//公司地址
        if (Info == "") { layer.msg("请输入项目简介", { icon: 2 }); $("#changetb1").click(); return; }
        if (Info.length > 200) { layer.msg("项目简介最多100字", { icon: 2 }); $("#changetb1").click(); return; }
        Data.Info = Info;
        var Name = $("#input-firstname").val();//姓名
        Data.Name = Name;
        var Telephone = $("#input-telephone").val();//所在城市
        if (Telephone == "") { layer.msg("请输入手机号", { icon: 2 }); $("#changetb2").click(); return; }
        if (!checkMobile(Telephone)) {
            layer.msg("手机号格式错误", { icon: 2 }); $("#changetb2").click(); return;
        }
        Data.Telephone = Telephone;
        var Email = $("#input-email").val();//联系人邮箱
        if (Email == "") { layer.msg("请输入邮箱", { icon: 2 }); $("#changetb2").click(); return; }
        if (!isEmail(Email)) {
            layer.msg("邮箱格式错误", { icon: 2 }); $("#changetb2").click(); return;
        }
        Data.Email = Email;
        var pwd = $("#input-password").val();//密码
        if (pwd == "") { layer.msg("请输入密码", { icon: 2 }); $("#changetb2").click(); return; }
        if (pwd.length < 6) { layer.msg("密码至少为6位数", { icon: 2 }); $("#changetb2").click(); return; }
        var repwd = $("#input-confirm").val();//密码
        if (pwd != repwd) { layer.msg("两次密码不一致", { icon: 2 }); $("#changetb2").click(); return; }
        Data.PassWord = pwd;

        var CompanyName = $("#input-company").val();//公司名
        if (CompanyName == "") { layer.msg("请输入公司名", { icon: 2 }); $("#changetb3").click(); return; }
        if (CompanyName.length > 20) { layer.msg("公司名最多20字", { icon: 2 }); $("#changetb3").click(); return; }
        Data.CompanyName = CompanyName;
        var CompanyAddress = $("#input-address").val();//公司地址
        if (CompanyAddress == "") { layer.msg("请输入公司地址", { icon: 2 }); $("#changetb3").click(); return; }
        if (CompanyAddress.length > 200) { layer.msg("公司地址最多100字", { icon: 2 }); $("#changetb3").click(); return; }
        Data.CompanyAddress = CompanyAddress;
        var CompanyInfo = $("#input-info").val();//公司简介
        if (CompanyInfo == "") { layer.msg("请输入公司简介", { icon: 2 }); $("#changetb3").click(); return; }
        if (CompanyInfo.length > 200) { layer.msg("公司简介最多200字", { icon: 2 }); $("#changetb3").click(); return; }
        Data.CompanyInfo = CompanyInfo;

        Data.City = $("#input-city").val();
        Data.Role = 1;
        var url = "/Account/AddProject";

        $('#btn').text('提交中...')
        ajaxGet.post(Data, url, function (data) { AddDataSuccess(data); }, function (data) { ExceptionDeal(data); })
    }
    function AddDataSuccess(json) {
        $('#btn').text('完成并立项')
        if (json.IsSuccess) {
            layer.msg("立项成功,请登录到客户端", { icon: 1 });
            location = "/WebSite/Login";
        } else {
            layer.msg(json.Message, { icon: 2 });
        }
    }
</script>